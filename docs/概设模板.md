
## 1. 介绍
### 1.1. 目的
简要介绍该设计要解决的问题（满足用户什么需求或者解决现有设计什么问题）。

### 1.2. 定义和缩写
定义或解释本文档中使用的所有专用名词和缩略语。



### 1.3. 参考和引用
列出本文档编写过程中参考的其它文档或资料

-参考需求文档的哪些章节
-参考总体设计文档的哪些章节
-参考的其他文档


# 2. 设计任务书
*本设计目标书在设计开始前由总体设计人员填写下发给概要设计人员，责任追溯时，如果任务书不完整有遗漏，则为总体设计人员的责任。*
*概要设计人员遵照任务书要求完成设计，需自行检查是否达到任务书的要求，在“自检”这一列填写是否通过（如对于需求点，需指明相关描述所在的章节号）。*
*性能目标和整体目标不允许写“与XX相同”一类，如果与别的项目（或版本）相同，就把别的项目（或版本）的指标复制到这里。*
### 2.1 需求跟踪（必须覆盖需求矩阵中与本模块相关的所有需求点）
| 编号 | 需求点名称                                                   | 需求点说明/验收条件                                          | 自检                             |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ | -------------------------------- |
| *1*  | *有多个功能点，就依次COPY，实际编写需求列表时请把注释和例子删除）* | *从功能要求（能完成什么任务，达成用户什么期望），性能要求（包括资源开销），稳定可靠性要求等方面描述该需求点完成后需要达成的要求。本描述要求简洁、准确，可作为设计验收的checklist* | *写明该需求点具体在哪个章节描述* |
| *2*  | *例子（AC上网加速中的需求点）：能够启用、禁用整个上网加速系统* | *1.用户可以启用或禁用上网加速，启用时能够提升内网用户的上网速度，禁用时对系统性能无任何影响；2.启动系统时间不超过3.5s，禁用系统不超过3s；3.异常关机、配置文件被破坏情况下仍能正常启动系统* | *通过，见6.1.2*                  |
### 2.2 模块整体目标
| 编号 | 目标项概述 | 对应的评审标准                                               | 自检 |
| ---- | ---------- | ------------------------------------------------------------ | ---- |
| 1    | 性能       | 并发用户数：                                                 |      |
|      |            | 并发连接数：                                                 |      |
|      |            | PPS（每秒处理包个数）：                                      |      |
|      |            | 支持规则数：                                                 |      |
|      |            | 界面响应速度：                                               |      |
|      |            | 新建连接速度：                                               |      |
|      |            | 其他：                                                       |      |
| 2    | 资源开销   | 内存占用：                                                   |      |
|      |            | DISK占用：                                                   |      |
|      |            | 其它：                                                       |      |
| 3    | 可靠性要求 | 本业务模块的可靠性要求（也即可靠性能力目标）*定义本模块的可靠性能力目标（目标要可验证可衡量）*： |      |
| 4    | 兼容性     | 允许升级配置的版本：                                         |      |
|      |            | 允许对接的版本：                                             |      |
| 5    | 可扩展性   | 哪些功能或接口需要可扩展设计：                               |      |
| 6    | 安全性     | 防止被越权使用或者成为攻击点：                               |      |
| 7    | 其他       |                                                              |      |

### 2.3 流程要求
| 该文档是否需要外部评审？ | 是/否   | 按设计流程要求 |
| ------------------------ | ------- | -------------- |
| **审核人签名**           | **XXX** | **时间：**     |

# 3. 对外接口
*描述本模块对外提供的软件接口，即是该模块的需要实现的需求功能之一*
*需要提供哪些对外接口，是从总体设计里面分解模块得到的，这里可以拷贝总体里面该模块的外部接口列表。*
*如果本模块支持自动化测试，需要实现对应的自动化测试接口，也需在“对外接口”中明确下来。*
*模块的对外接口，需要遵守公司定义的API规范。如果现有规范无法覆盖需求，需要组织干系方讨论需求，提取新的规范接口并评审，参考流程：http://code.sangfor.org/sangfor/specification*

| 引用规范的名称                        | 应用模块（下面模块设计里的某个模块） | 代码实现（如果使用公共代码列出公共代码引用位置，如果自研代码描述自研代码相关信息） | 备注（约束要求，例如性能要求，接口自动化测试要求）           |
| ------------------------------------- | ------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 各产品线API对接规范V1.0之弹窗提醒.doc | 联动提醒模块                         | 自研Python代码，发布时将此模块抽取成公共模块给公司其他产品线复用。 | 能支撑并发20个用户同时提示；用户不在线时支持重试；支持多个消息合并。 |
| -                                     | -                                    | -                                                            | -                                                            |
| -                                     | -                                    | -                                                            | -                                                            |
| -                                     | -                                    | -                                                            | -                                                            |
| -                                     | -                                    | -                                                            | -                                                            |
### 3.1 API接口
*Api接口：以api或rpc等形式提供的外部接口。*
*如果未对外提供API接口，本章节可以删除*
| 名称       | *create_listener*  | -    | -    | -                |
| ---------- | ------------------ | ---- | ---- | ---------------- |
| **功能**   | **创建侦听socket** | -    | -    | -                |
|            | 参数名             | 类型 | 方向 | 说明             |
|            | port               | int  | in   | Socket侦听的端口 |
| **参数**   | -                  | -    | -    | -                |
| **返回值** | Socket的描述符     | -    | -    | -                |
### 3.2. 消息接口
*消息接口：以进程/实体间传递的消息为接口*
*如果未对外提供消息接口，本章节可以删除。*

| 名称       | *msg_hdr*                          | -          |
| ---------- | ---------------------------------- | ---------- |
| **说明**   | **该二进制消息的用途，注意事项等** | -          |
| **字段名** | **类型/长度(单位bit)**             | 说明       |
| head       | CH                                 | 通用数据头 |
| src_ip     | 32                                 | 源IP       |

# 4. 概要说明
### 4.1. 背景描述
#### 4.1.1. 工作原理
*描述本模块的主要工作原理，关键需求的设计思路。*

#### 4.1.2. 应用场景
*对本模块在客户处的应用场景进行分析。客户应用本模块解决什么问题，客户在哪些场合、有哪些方式来应用本模块，使用过程中有哪些操作，会发生哪些事件，需要得到什么处理结果？比如：在京东购书，主场景是用户登录app，搜索图书，下单，付款，快递上门。过程中可能发生登录失败，付款不成功，等各种各样的事件。*

*场景分析的目的是分析清楚模块运行过程中会发生什么事件，分析的结果用以评估各方案在实际运行过程中，能否正常应对这些事件，会不会发生问题。*

*可以采用用例分析（use case）方法对场景进行分析，也可以用事件流分析方法对场景进行分析，参考：《设计进修指南》*
#### 4.1.3. 对手分析
*如果竞争对手有类似功能，本节对竞争对手的功能实现进行分析，说明对手的方案的优缺点，以及借鉴的地方。如果业界其它产品中有类似功能或方案，选择较为突出的进行分析，并说明借鉴的地方。对手分析的目的不是模仿对手，而是为了更全面的了解该领域需要面对的问题和前人已经使用过的解决方案，保证设计过程不要踩坑，做无用功。*

### 4.2方案选型

*此章节，需要使用方案选型表对核心需求项的多个可行方案进行选型，确定最终采用的实现方案。*

*此处简述本设计的可供选型方案，并说明最终所选的方案，以及选择该方案的原因。此章节需最先完成，并且方案选型表讨论通过，才能展开下一步的设计工作。参考：1.5.2 方案设计*

*说明：*

*1、合理的方式，应该是如下用打分的方式进行判断*

*2、如果打分有困难，至少应该填写黄底色框，并叙述最终所选择方案的优点、风险和缺点，目的是只有考虑周全的方案才是合理的，凭借个人经验、对评估准则个人有个人看法的，所选择的方案有可能存在重大风险，埋下地雷。*

| 评估准则  | 权重 | 评估方法 | 方案1 | 方案2 | 方案3 | 方案4 |
| --------- | ---- | -------- | ----- | ----- | ----- | ----- |
| 评估准则1 | 50%  |          |       |       |       |       |
| 评估准则2 | 15%  |          |       |       |       |       |
| 评估准则3 | 20%  |          |       |       |       |       |
| 评估准则4 | 15%  |          |       |       |       |       |

| 备选方案名称 | 本方案的优点 | 本方案的风险和缺点 | 最终选择 |
| ------------ | ------------ | ------------------ | -------- |
| 方案1        |              |                    |          |
| 方案2        |              |                    |          |
| 方案3        |              |                    |          |
| 方案4        |              |                    |          |


### 4.3 静态结构

*本章节描述模块中各软件单元（子模块或类）之间的结构关系，使用静态视图方式描述（比如类图、结构图等）。即整个模块可以分解为哪些软件单元，这些软件单元相互之间是什么关系，以及他们是怎么协作完成整体工作任务的。*

*本章节还需描述那些作为流程间协作纽带的公共数据结构，比如连接跟踪模块的连接表。本章对数据结构进行概要描述，主要描述数据结构设计意图以及与其它数据结构之间的关系，帮助理解围绕该数据结构设计的概要流程。详细定义可以放在后续章节给出。*

### 4.4. 对软件总体架构的影响
*本章节描述本次新增及调整模块对软件总体架构的影响点。*
| 情况分类                                                     | 是否对总设有影响 |
| ------------------------------------------------------------ | ---------------- |
| 1.本次新增或调整的模块对总体架构是否有影响                   | 是/否            |
| 2.本次新增或调整的模块对总体架构有一定程度的影响，但涉及的模块少于3个（如调整了某个基础模块对外提供服务的方式，由socket通信改为了rpc调用），请在本章节描述具体的架构改动内容 | 是/否            |
| 3.本次新增或调整的模块对总体架构有较大影响，需要对原有软件架构进行较大调整或者重新设计，请重新做总体设计《XXX版本设计策略说明书.docx》模板：http://cms.sangfor.com/pages/viewpage.action?pageId=46981063 | 是/否            |

### 4.5. 概要流程
*说明本模块的基本设计概念和处理流程动态视图，尽量使用图表的形式，并描述其具体步骤。本节描述的流程一般是那些涉及到多个子模块(或类)的流程。*

#### 4.5.1. 流程1(改成具体的流程名字)
描述。

#### 4.5.2. 流程x(根据需要可自行添加章节)
描述。

#### 4.5.3. 可调试性机制分析及设计
*分析本模块中哪些业务流程是调试难度较高的流程（比如依赖高并发、大流量、海量数据的流程，比如依赖条件复杂或者苛刻，很难跑到的流程，比如很难分析结果正确性的流程，等等），给出具体调试方法（比如录制数据重放以重现错误，比如利用调试接口诊断某类错误），和降低调试难度的方法（比如记录内部状态，定时进行数据有效性自检，添加校验值自动校验数据正确性，增加调试接口等等）。*

*分析本模块在客户场景可能出现的故障，给出供技术支持人员诊断错误的方法和工具。*



#### 4.5.4. 可测试性机制分析及设计
*1）分析本模块中哪些业务流程是测试难度较高（比如逻辑复杂，容易测试不完全），或者依赖性较高（依赖环境或依赖其它模块，比如依赖特殊硬件，特殊内核版本，比如依赖北研数据面）；*

*2）对测试难度较高的业务流程给出测试方案，对依赖性较高的业务流程给出解耦方法；*

*3）给出降低测试复杂度的方法，包括测试方法的改进，以及对本模块设计方面的改进；*

*可测试性机制设计的目的是降低后续测试的难度，提高测试工作效率和质量，尽早发现问题。为了提升可测试性设计的质量，设计者需要遵守《软件可测试性技术规范》的要求，详情请参考：http://docs.sangfor.org/pages/viewpage.action?pageId=42148775*



#### 4.5.5. 可扩展可复用设计
*分析本模块后续可能的扩展要求，以及可供后续扩展使用或其它模块使用的流程机制；*

#### 4.5.6. 系统隐私设计
*隐私目标：定义系统不会出现因自身安全而造成敏感信息泄露的目标：系统在收集用户信息时，不会出现私自收集用户不清楚及用户不同意收集的数据；*

*隐私设计：给出系统在业务传输过程保护方面的设计机制，包含但不限于各类业务的传输敏感信息时，需要使用安全协议传输，以及对内容进行加密传输；此外需要确保系统在收集信息时，应明确为什么需要收集该信息，还应尝试预判未来是否会使用这些信息用于其他事物，并告知用户是否有这样的计划，提供一份易于阅读的条款或条件的摘要。*



#### 4.5.7. 安全性设计
##### 4.5.7.1 威胁建模分析（由产线安全经理判断是否需要执行）
*威胁建模分析，目的是分析该版本总体设计中涉及到的各个模块实体、数据存储、进程服务、开放端口、交互协议等是否存在相关的安全威胁风险，把风险识别出来并填入如下表格，*

*威胁建模分析报告模板：http://docs.sangfor.org/pages/viewpage.action?pageId=125271763（序号02）*

##### 4.5.7.2 安全设计
*根据上一节威胁建模识别出来的风险和建议采取的安全措施，各个模块威胁对应的安全机制，在此章节进行详细描述，比如通信协议要加密，就需要设计相关的加密方案*

###### 4.5.7.2.1模块1安全设计
*详细描述模块1的安全设计机制。*

###### 4.5.7.2.2模块2安全设计
*详细描述模块2的安全设计机制。*

###### 4.5.7.3 预使用组件版本合规性及版本漏洞情况（必做）
*使用开源组件扫描器对预计使用的组件版本进行合规性扫描（   网址及使用方式，请与产线安全经理联系）有严重、高危必须修复，扫描完即可*

#### 4.5.8. 可靠性设计
*基于可靠性工程的角度来进行的，基于故障容错的思路来开展的，不包含代码功能实现缺陷、业务逻辑的不合理、业务条件的不满足导致的特性失效。主要包含下面三个方面的内容，其中前两个内容主要依赖于系统内的公共机制来辅助实现或者依赖特性功能自身实现，第三个内容依赖FMEA分析来进行*

**1、承载载体可靠**
*基于该特性的实现，分析该特性的承载载体，基于可靠性需求基线、可靠性设计准则库中的要求给出这些载体的可靠性方案。此处在系统可靠性设计（例如总体设计说明书）中如果已经包含，则不用重复。通常情况下特性的载体体现为进程/服务及相关联的数据和文件，以及特有的硬件部件（例如FPGA、加密卡等）、开源软件（例如数据库Mongodb等等）、自研中间件等*

**1) 进程/服务故障的检测、告警上报、自动恢复，部分依赖于系统可靠性的公共机制**。重点考虑2个方面

1.1）服务自身故障的自动恢复：*虽然有进程故障管理的公共机制，但是仍然需要考虑是否满足本特性的需要，比如进程故障管理公共机制里面没有包含对进程D状态的检测与恢复，二本特性从实现上来讲比较容易出现进程D状态，那就要给进程故障管理公共机制提出对进程D状态进行检测与自动恢复的需求并配合共同实现*

1.2）关联的数据的要求：*则进程故障过程不能丢失数据（具备持久化能力）、不能残留数据（垃圾数据清理能力或者再利用能力）、进程本身也不能有残留*

**2)服务的冗余机制**：*用于主机级以及服务级故障的容错，比如主备集群，主从式集群，负荷分担集群（依赖负载均衡器）等等，典型的例子如k8s基于kube-vip的K8S Master Node集群等等；不仅要组集群，还需要做到故障切换过程可靠（应切能切，不误切）和不中断业务，集群节点之间的数据同步/数据一致性，其他根据集群特点需要考虑的范围等等*

**3)数据、文件**：*通用的数据、文件的故障的检测与恢复机制，包含但不限于数据与文件的系统内备份以及系统外备份 、数据一致性校验等*

**4)特定硬件部件**：*要有硬件冗余机制，要保证硬件冗余切换过程可靠（应切能切，不误切）以及不中断业务，硬件故障（损坏、卡慢等等）检测与告警上报*

**5)开源组件、自研中间件**：*要有双机或者集群机制，还需要做到故障切换过程可靠（应切能切，不误切）和不中断业务，集群节点之间的数据同步/数据一致性，其他根据集群特点需要考虑的范围等等，组件、中间件所涵盖的故障模式的故障检测与告警上报（例如Etcd服务启动失败等等）*

**2、周边无影响**
[details="展开说明"]
*基于该特性的实现，分析该特性的资源使用（包含但不限于CPU、内存、硬盘空间、硬盘IO、网络带宽、业务资源等等），明确该特性与其他特性之间的资源隔离机制。此处在系统可靠性设计（例如总体设计说明书）中如果已经包含，则不用重复。主要考虑的是功能特性（包含所有的承载载体：服务、数据文件、特有硬件、中间件等等）在保证自身功能实现的前提下不会对其他等特性产生不利的影响，最大的通用的不利影响主要体现在因为自身对资源的过度占用（无论是业务行为还是缺陷导致的）而导致其他功能特性甚至整个系统因为资源被强占而出现业务性能下降或者中断。因此需要对该功能特性的资源占用进行上限控制（可以是静态的也可以是动态的）。包含但不限于CPU、内存、硬盘空间、硬盘IO、网络带宽、文件目录上限等等资源，当然实现这些资源的上限控制机制，主要体现在两个方面，一方面是功能实现自身的的控制（比如控制了业务处理的规格限制也一定程度上控制了资源的占用），另一个方面是需要通过公用的机制对功能特性的资源占用上限进行控制。当然也可能会有其他方面的不利影响，需要根据业务模块自身而定*
[/details]

**3、业务流程可靠**：*功能特性所实现的每一个业务都是可靠性的，主要是基于业界的FMEA工程方法进行，其核心思想是分析每个功能特性中的每个功能点的处理流程中会发生什么样的故障以及如何避免这些故障带来的功能不可用。主要包含如下四方面的分析内容*

**1）功能定义**：*将功能特性分解为若干个子业务/功能，然后定义每个子业务/功能的功能要求；画出每个子业务/功能的时序流程图，明确业务流程中的关键动作（例如写文件、写缓存、读数据库等等）*

**2） 失效分析**：*定义每个子业务/功能的失效模式（上一个步骤的功能要求的反面），然后基于时序流程图中的关键动作分析产生失效的原因（其实就是关键动作执行失败、执行卡慢）*

**3） 行动排序**：*上面完成了失效模式、失效影响、失效原因的分析后，下一步就是要采取一些措施来避免失效模式的发生或者降低失效影响。但是由于资源、技术、时间或者其他的固有原因，必须要对这些失效场景进行优先级排序。业界在FMEA种使用AP（行动优先级）（提供了1000多种等的组合）作为落实改进措施的优先级依据，其依赖于三个因素，首先是严重程度（S），其次是发生频度（O），最后是可探测度（D），将改进措施定义为三个优先级：高（H）、中（M）、低（L）*

**4） 改进措施**：*给出避免失效（消除故障、检测并自动恢复故障）或者降低失效发生概率、影响程度的方案*




*详细参考（4.5.8章节）：https://docs.atrust.sangfor.com/pages/viewpage.action?pageId=329743999*
*FMEA相关指导和链接如下：*
*FMEA分析指导：特性设计指导中的2.3 https://docs.atrust.sangfor.com/pages/viewpage.action?pageId=351885051*
*FMEA分析模板：公司级FMEA分析模板  https://docs.atrust.sangfor.com/pages/viewpage.action?pageId=212302936*
*可靠性需求基线：公司级可靠性需求基线  https://docs.atrust.sangfor.com/pages/viewpage.action?pageId=122772969*
*可靠性设计准则：公司级可靠性设计准则https://docs.atrust.sangfor.com/pages/viewpage.action?pageId=167438827*

#### 4.5.9. 可维护设计
*说明为了系统维护的方便而在程序内部设计中作出的安排，包括在程序中专门安排用于系统的检查与维护的检测点和专用模块。*

#### 4.5.10. 跨平台设计和平台差异处理
*该模块目前及以后可能运行在哪些平台上，如x86，ARM，MIPS等，32位系统还是64位系统，在差异处理上做统一的规范约定。如果对未来的规划不清楚，尽可能设计成跨平台的。跨平台是整个设计过程都要去考虑的事情，包括对外接口设计，数据结构定义，流程设计，函数详细设计等。*

*请在这里描述一下该模块跨平台时有哪些地方需要注意，比如对外通讯接口是否平台无关，数据结构的设计是否能适应32位和64位系统变迁，是否能自适应大小端。这里设计的目的是要用统一的一套代码完成需求，而不要维护多套代码。可以像linux内核那样，把平台无关的流程提炼成公共文件，平台相关的代码写到不同的文件。*

 ### 4.6. 方案风险分析
*对本章描述的方案进行整体风险分析，找到所有可能存在风险的关键环节，对每一个风险，需要给出解决方法（包括消除、规避、缓解、后续跟进等）。对于现阶段无法消除的风险，需要整理为列表，作为后续跟进的事项。*

*对于有风险没有把握的设计，需要有预研结果做保证或者有备用方案。万一此路不通，可以选择备用方案。*
| 风险点                            | 风险预研结果/风险规避措施                                    |
| --------------------------------- | ------------------------------------------------------------ |
| 例1：处理速度达100MBPS            | 根据预研文档《xxx》，可以达到要求                            |
| 例2：缓存数据耗用内存可能超过800M | 如果超过800M，使用最久未使用淘汰算法将部分数据保存在磁盘上。 |

# 5. 数据结构设计
### 5.1. 配置文件定义
*定义相应的配置文件格式，存储方式，存储路径，各字段代表什么意义。如果是存储在数据库中，需说明数据库名，表名。*
| 名称         | 作用               | 默认值          | 取值范围                      |
| ------------ | ------------------ | --------------- | ----------------------------- |
| max_username | 最大的用户名字长度 | 256             | 字符串，长度范围[16,1024)     |
| log_fname    | 日志文件名         | /var/log/ac.txt | 文件路径名，合法的linux文件名 |
| ---          | ---                | ---             | ---                           |
| ---          | ---                | ---             | ---                           |

*如果需要在原有配置文件基础上升级，需描述配置的升级流程。*

### 5.2. 全局数据结构定义
*描述全局数据结构设计，须描述每一个字段的名称和作用。全局数据结构包括：*
*1） 在多个软件单元之间传递（比如通过函数参数）的数据结构；*
*2） 全局变量；*
*3） 通讯用的消息*；

| 结构说明     | IP组，存放一组服务器的IP                              | ---                                           | ---                                 |
| ------------ | ----------------------------------------------------- | --------------------------------------------- | ----------------------------------- |
| **结构定义** | **struct ip_group{size_t cnt;unsigned int ips[0];}**; | ---                                           | ---                                 |
| **字段说明** | **字段名**                                            | **取值范围**                                  | **说明**                            |
| ---          | cnt                                                   | [0,4K]                                        | ips数组的长度，即里面存放的整数个数 |
| ---          | ips                                                   | 网络字节序的IP地址数组，数组长度为cnt指定长度 | IP地址数组                          |
| ---          | ---                                                   | ---                                           | ---                                 |
| ---          | ---                                                   | ---                                           | ---                                 |
| ---          | ---                                                   | ---                                           | ---                                 |

# 6. 流程设计
*描述模块内部各软件单元的组织结构，接口，以及逻辑，算法实现等。这里指的软件单元可以是一个子模块，也可以是C++的一个类。*
### 6.1. 子模块1/类1/主题1

#### 6.1.1. 静态结构
*描述本子模块的职责定义，以及本子模块由哪些更细化的软件单元组成。*

#### 6.1.2. 处理流程
*描述子模块内部各函数之间的交互逻辑。*
#### 6.1.3. 关键算法描述
*分析本子模块中哪些算法流程是关键流程，会影响到模块整体的关键性能。有性能（或效果）要求的算法必须在此阐述。每个算法须描述最常见的场景及性能最差的场景，并说明在这两个场景下可达到的性能指标。如果最差场景不能达到性能要求，需分析该场景在用户处出现的几率，以及出现该场景对用户造成的负面影响。*

#### 6.1.4. 数据结构定义
*描述函数间传递的数据结构或者进程/实体间传递的消息。*



#### 6.1.5. 函数列表
*描述本模块中需要实现的函数。对于每个函数，需要描述函数的名字，函数功能，参数的类型和作用、取值范围，返回值的类型和作用、取值范围，以及该函数的其它前后置约束条件（比如需要访问的全局变量）。*
| 函数名   | 函数功能     | 参数及返回值                                            | 说明（包括其它前置/后置约束条件，等） |
| -------- | ------------ | ------------------------------------------------------- | ------------------------------------- |
| generate | 生成测试案例 | [in]const value_t* val：输入模板，必须为有效的value_t； | ---                                   |
| ---      | ---          | ---                                                     | ---                                   |

#### 6.1.6. 设计要点检视
*本表格作为一个设计要点的检查列表，帮助设计人员回顾相关要点具体是怎么考虑的，是否已经满足需要。相关要点必须体现在本章的各个子章节中（比如结构、流程、函数列表等），表格填写内容仅仅作为一个总结。*

| 可维护/可调试措施  | 分析开发过程可能遇到的调试难题，描述设计中所提供的解决方案。需要说明针对这些调试难题，给开发调试、维护人员具体提供了哪些排错手段。怎么帮助开发、维护人员更快定位，排除错误。 |
| ------------------ | ------------------------------------------------------------ |
| **可测试性**       | **分析测试过程可能遇到的测试难题，描述设计中所提供的解决方案。需要说明针对这些测试难题，给测试人员提供了哪些测试支持。怎么保证更易于测试本模块。** |
| **自动化测试支持** | **分析该子模块如何进行自动化测试，怎么保证自动化测试能够更好验证本子模块/类的功能。。** |
| **可测试性**       | **分析测试过程可能遇到的测试难题，描述设计中所提供的解决方案。需要说明针对这些测试难题，给测试人员提供了哪些测试支持。怎么保证更易于测试本模块。** |
| **可扩展性**       | **分析将来版本最有可能发生扩展的特性，说明针对这些扩展保留的设计支持；。** |
| **稳定性保证措施** | **分析软件运行过程中，该子模块容易发生哪些类型异常，给出异常检测，异常恢复措施** |
| **工作量估算**     | **对实现本节设计内容需要的工作量进行估算，按人天算。设计需要消除风险，让风险可控。风险可控的典型标志就是可以较为准确的估算出工作量** |
### 6.2. 子模块2/类2/主题2
*按上面格式模板描述下一个子模块或者类*

# 7.完成设计checklist自检，并输出自检表到该章节（必填）
设计自检点击获取：https://cms.atrust.sangfor.com/pages/viewpage.action?pageId=1409540&preview=/1409540/164524352/SFRD-PPQA-03-4.4(%E7%89%88%E6%9C%AC%E5%90%8D)%E7%A0%94%E5%8F%91%E8%AE%BE%E8%AE%A1checklist(%E6%A8%A1%E5%9D%97%E5%90%8D%2C%E5%A7%93%E5%90%8D).xlsx


# 8. 总结
### 8.1. 关联分析
*对老模板/老版本/相关联产品的影响，请做分析。可以和对应的模块责任人架构师做交流*
### 8.2. 遗留问题解决
*说明在总体设计过程中尚未解决的各个问题的解决方案。*

*说明在上一个版本未解决的应该在本模块中解决的各个遗留问题的解决方案；*

# 9. 业务逻辑相关的测试用例
*此部分内容在详细设计模板中也有。如果一个模块概设、详设都做，此章节在其中一个文档中完成即可。设计完成后，鉴于测试人员可能对模块设计的内部逻辑、流程、数据流向不清楚，用例质量会得不到保证。*

*为了提高测试用例的质量，尽早尽全地覆盖到关键实现，要求开发人员撰写内部逻辑、流程、数据流向相关的测试用例。如果对测试用例的设计不太清楚，至少要描述出测试步骤和验证点。此部分可以放到编码结束后补充填写。*

*如果给测试人员讲的很清楚，测试版本经理认为不用写，可以不写。*

# 10. 变更控制
### 9.1. 变更列表
*在编码过程中，可能会有一些设计不合理的地方，需要对原设计做一些调整，需要在这里说明变更的章节、内容、原因，并对变更进行评审确认（至少需要经过版本经理/开发经理的确认）。此章节在编码完对设计文档更新后进行评审确认。*

*需求变更引起的设计变更，也在下面加以说明，并对设计变更的结果进行部门内部评审。*
| 变更章节 | 变更内容 | 变更原因 | 变更对对老功能、原有设计的影响                               |
| -------- | -------- | -------- | ------------------------------------------------------------ |
| ---      | ---      | ---      | 考虑完全这些影响，要和开发经理、架构师、设计人员、老版本的开发人员进行交流，并最后评审 |


